<% layout('layouts/boilerplate') %>

<h1 class="mb-4">Daftar Project</h1>

<a href="/projects/new" class="btn btn-primary mb-3">+ Tambah Project</a>

<table class="table table-striped">
  <thead class="table-dark">
    <tr>
      <th>No.</th>
      <th>Judul</th>
      <th>Kategori</th>
      <th>Author</th>
      <th>Assignment</th>
      <th>Skor</th>
      <th>Aksi</th>
    </tr>
  </thead>
  <tbody>
    <% let num = 0; %> <% projects.forEach(project => { %>
    <tr>
      <td><%= ++num %></td>
      <td><%= project.title %></td>
      <td><%= project.category %></td>
      <td><%= project.author?.name || '-' %></td>
      <td><%= project.assignment?.title || '-' %></td>
      <td><%= project.score ?? '-' %></td>
      <td>
        <a href="/projects/<%= project._id %>" class="btn btn-info btn-sm">Lihat</a>
        <form method="POST" action="/projects/<%= project._id %>?_method=DELETE" style="display: inline">
          <button class="btn btn-danger btn-sm" onclick="return confirm('Yakin ingin menghapus project ini?')">Hapus</button>
        </form>
      </td>
    </tr>
    <% }); %>
  </tbody>
</table>
