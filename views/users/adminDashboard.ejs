<% layout('layouts/boilerplate') %>

<div class="container my-4">
  <h1>Dashboard Admin</h1>

  <div class="row text-center my-4">
    <div class="col">
      <a href="/courses" class="text-decoration-none text-dark">
        <div class="card shadow-sm">
          <div class="card-body">
            <h5>Mata Kuliah</h5>
            <p><%= totalCourses %></p>
          </div>
        </div>
      </a>
    </div>
    <div class="col">
      <a href="/students" class="text-decoration-none text-dark">
        <div class="card shadow-sm">
          <div class="card-body">
            <h5>Mahasiswa Terdaftar</h5>
            <p><%= totalStudents %></p>
          </div>
        </div>
      </a>
    </div>
    <div class="col">
      <a href="/assignments" class="text-decoration-none text-dark">
        <div class="card shadow-sm">
          <div class="card-body">
            <h5>Project Mahasiswa</h5>
            <p><%= totalAssignments %></p>
          </div>
        </div>
      </a>
    </div>
  </div>

  <div class="my-5">
    <h3 class="mb-3">📌 Tugas Mendekati Deadline</h3>
    <% if (upcomingAssignments.length > 0) { %>
    <ul>
      <% upcomingAssignments.forEach(a => { %>
      <li><a href="/assignments/<%= a._id %>"><%= a.title %></a> - <%= a.dueDate.toDateString() %></li>
      <% }) %>
    </ul>
    <% } else { %>
    <p>Tidak ada tugas mendekati deadline.</p>
    <% } %>
  </div>

  <div class="my-5">
    <h3 class="mb-3">📝 Pengumpulan Terbaru</h3>
    <% if (recentProjects.length > 0) { %>
    <ul>
      <% recentProjects.forEach(p => { %>
      <li>
        <strong><%= p.author?.name || 'Unknown' %></strong> -
        <a href="/projects/<%= p._id %>"><%= p.title %></a>
      </li>
      <% }) %>
    </ul>
    <% } else { %>
    <p>Belum ada pengumpulan terbaru.</p>
    <% } %>
  </div>

  <div class="my-5">
    <h4>🔧 Aksi Cepat</h4>
    <a href="/register" class="btn btn-warning btn-sm">+ Tambah User</a>
  </div>
</div>
