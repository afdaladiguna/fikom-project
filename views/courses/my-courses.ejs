<% layout('layouts/boilerplate.ejs') %>

<h1 class="fs-2 pb-3">📝 Kelas yang Kamu Ikuti</h1>

<div class="row">
  <% for (let course of courses) { %>
  <div class="col-md-6 col-lg-4">
    <div class="card mb-4 shadow-sm h-auto">
      <div class="card-body d-flex flex-column justify-content-between">
        <div>
          <h5 class="card-title mb-2"><%= course.code %> - <%= course.name %></h5>

          <div class="text-muted small mb-2">
            <p class="mb-1"><i class="bi bi-person-video3 me-1"></i><strong>Dosen:</strong> <%= course.lecturer.name %></p>
            <p class="mb-1"><i class="bi bi-people-fill me-1"></i><strong>Kelas:</strong> <%= course.class %></p>
            <p class="mb-1"><i class="bi bi-calendar3 me-1"></i><strong>Semester:</strong> <%= course.semester %></p>
            <p class="mb-1"><i class="bi bi-calendar3 me-1"></i><strong>Tahun Ajaran:</strong> <%= course.academicYear %></p>
          </div>

          <% if (course.description) { %>
          <hr class="my-2" />
          <p class="text-muted small"><%= truncate(course.description, 150) %></p>
          <% } %>
        </div>

        <div class="pt-2">
          <a href="/courses/<%= course._id %>" class="btn btn-sm btn-warning">Lihat Detail</a>
        </div>
      </div>
    </div>
  </div>
  <% } %>
</div>

<script>
  <% function truncate(text, maxLength) {
    if (text && text.length > maxLength) {
      return text.slice(0, maxLength) + '...';
    }
    return text;
  } %>
</script>
